jQuery(function(e){e(document).ready(function(){e("form#options").on("submit",function(t){return t.preventDefault(),function(){e("#update-but").hide(),e(".update-but-notice").remove(),e("#update-but-loader").show();var t=e("form#options").serializeArray();e.post(simontaxi_vars.ajaxurl,t,function(t){t&&(e("#update-but-loader").hide(),e("#update-but").show(),e("#update-but").before('<div class="notice notice-success is-dismissible update-but-notice"><p>'+message+"</p></div>"))})}()})}),e('[data-toggle="tooltip"]').tooltip({html:!0}),e(".selectpicker").select2()});var geocoder,map,rectangle,selectedShape,media_uploader=null;function open_media_uploader_image(e){(media_uploader=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",function(){var t=media_uploader.state().get("selection").first().toJSON(),a=t.url;t.caption,t.title;jQuery("#"+e).val(a)}),media_uploader.open()}function move_tab(e){var t=e,a=jQuery("ul.nav li");jQuery.each(a,function(e,a){var o=jQuery(a).find("a").data("tab");t==o?(jQuery("#"+o).show(),jQuery(a).addClass("active")):(jQuery("#"+o).hide(),jQuery(a).removeClass("active"))})}function remove_image(e){jQuery("#"+e).val(""),jQuery("#"+e+"_remove").val("yes"),jQuery("#"+e+"_image").remove(),jQuery("#"+e+"_link").remove()}function toggle_options(e){jQuery("#"+e).is(":checked")?jQuery("#"+e+"_span").show():jQuery("#"+e+"_span").hide()}var map2,rectangle2,selectedShape2,gmarkers=[];function google_map(){var e={center:new google.maps.LatLng(44.5452,-78.5389),zoom:5};map=new google.maps.Map(document.getElementById("vehicle_country_region_from_map"),e);var t=jQuery("#vehicle_country option:selected").html();(new google.maps.Geocoder).geocode({address:t},function(e,t){t==google.maps.GeocoderStatus.OK&&map.setCenter(e[0].geometry.location)});var a=document.getElementById("vehicle_country_region_from").value.split(","),o=document.getElementById("vehicle_country_region_to").value.split(","),r=parseFloat(a[0]),n=parseFloat(a[1]),l=parseFloat(o[0]),i=parseFloat(o[1]),s=!0;if((isNaN(r)||isNaN(n)||isNaN(l)||isNaN(i))&&(s=!1),s){var g={north:parseFloat(a[0]),south:parseFloat(a[1]),east:parseFloat(o[0]),west:parseFloat(o[1])};rectangle=new google.maps.Rectangle({strokeColor:"#6c6c6c",strokeOpacity:.8,strokeWeight:3.5,fillColor:"#926239",fillOpacity:.6,map:map,bounds:g,editable:!0,draggable:!0});var p=new google.maps.Marker({position:new google.maps.LatLng(a[0],o[1]),title:t,map:map});gmarkers.push(p),map.panTo(p.getPosition()),map.setCenter(p.getPosition()),map.panToBounds(g),map.setCenter({lat:parseFloat(a[0]),lng:parseFloat(o[1])}),map.setCenter(p.getPosition())}}function deleteSelectedShape(){rectangle&&rectangle.setMap(null),rectangle=null}function drawRec(){drawingManager&&drawingManager.setMap(null),drawingManager.setOptions({drawingMode:google.maps.drawing.OverlayType.RECTANGLE,drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.RECTANGLE]},rectangleOptions:{strokeColor:"#6c6c6c",strokeWeight:3.5,fillColor:"#926239",fillOpacity:.6,editable:!0,draggable:!0},map:map}),drawingManager.setMap(map),google.maps.event.addListener(drawingManager,"overlaycomplete",function(e){var t=e.overlay;if(t.type=e.type,"rectangle"==e.type){google.maps.event.addListener(t,"click",function(e){setSelection(t)});var a=e.overlay.getBounds(),o=a.getNorthEast(),r=a.getSouthWest();document.getElementById("vehicle_country_region_from").value=o.lat().toFixed(3)+","+r.lat().toFixed(3),document.getElementById("vehicle_country_region_to").value=o.lng().toFixed(3)+","+r.lng().toFixed(3)}setSelection(t)})}function setSelection(e){"marker"!==e.type&&(clearSelection(),e.setEditable(!0)),selectedShape=e}function clearSelection(){selectedShape&&("marker"!==selectedShape.type&&selectedShape.setEditable(!1),selectedShape=null)}function removeMarkers(){if(gmarkers)for(i=0;i<gmarkers.length;i++)gmarkers[i].setMap(null)}function clearRec(){drawingManager&&drawingManager.setMap(null),rectangle&&rectangle.setMap(null),rectangle=null,selectedShape&&selectedShape.setMap(null),removeMarkers()}var gmarkers2=[];function google_map2(){var e={center:new google.maps.LatLng(44.5452,-78.5389),zoom:5};map2=new google.maps.Map(document.getElementById("vehicle_country_dropoff_region_from_map"),e);var t=jQuery("#vehicle_country_dropoff option:selected").html();(new google.maps.Geocoder).geocode({address:t},function(e,t){t==google.maps.GeocoderStatus.OK&&map2.setCenter(e[0].geometry.location)});var a=document.getElementById("vehicle_country_dropoff_region_from").value.split(","),o=document.getElementById("vehicle_country_dropoff_region_to").value.split(","),r=parseFloat(a[0]),n=parseFloat(a[1]),l=parseFloat(o[0]),i=parseFloat(o[1]),s=!0;if((isNaN(r)||isNaN(n)||isNaN(l)||isNaN(i))&&(s=!1),s){var g={north:parseFloat(a[0]),south:parseFloat(a[1]),east:parseFloat(o[0]),west:parseFloat(o[1])};rectangle2=new google.maps.Rectangle({strokeColor:"#6c6c6c",strokeOpacity:.8,strokeWeight:3.5,fillColor:"#926239",fillOpacity:.6,map:map2,bounds:g,editable:!0,draggable:!0});var p=new google.maps.Marker({position:new google.maps.LatLng(a[0],o[1]),title:t,map:map2});gmarkers2.push(p),map2.panTo(p.getPosition()),map2.setCenter(p.getPosition()),map2.panToBounds(g)}}function drawRec2(){drawingManager2&&drawingManager2.setMap(null),drawingManager2.setOptions({drawingMode:google.maps.drawing.OverlayType.RECTANGLE,drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.RECTANGLE]},rectangleOptions:{strokeColor:"#6c6c6c",strokeWeight:3.5,fillColor:"#926239",fillOpacity:.6,editable:!0,draggable:!0},map:map2}),drawingManager2.setMap(map2),google.maps.event.addListener(drawingManager2,"overlaycomplete",function(e){var t=e.overlay;if(t.type=e.type,"rectangle"==e.type){google.maps.event.addListener(t,"click",function(e){setSelection(t)});var a=e.overlay.getBounds(),o=a.getNorthEast(),r=a.getSouthWest();document.getElementById("vehicle_country_dropoff_region_from").value=o.lat().toFixed(3)+","+r.lat().toFixed(3),document.getElementById("vehicle_country_dropoff_region_to").value=o.lng().toFixed(3)+","+r.lng().toFixed(3)}setSelection2(t)})}function setSelection2(e){"marker"!==e.type&&(clearSelection2(),e.setEditable(!0)),selectedShape2=e}function clearSelection2(){selectedShape2&&("marker"!==selectedShape2.type&&selectedShape2.setEditable(!1),selectedShape2=null)}function removeMarkers2(){if(gmarkers2)for(i=0;i<gmarkers2.length;i++)gmarkers2[i].setMap(null)}function clearRec2(){drawingManager2&&drawingManager2.setMap(null),rectangle2&&rectangle2.setMap(null),rectangle2=null,selectedShape2&&selectedShape2.setMap(null),removeMarkers2()}function setMapCenter1(e){e=jQuery("#vehicle_country option:selected").html();(new google.maps.Geocoder).geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK&&map.setCenter(e[0].geometry.location)})}function setMapCenter2(e){e=jQuery("#vehicle_country_dropoff option:selected").html();(new google.maps.Geocoder).geocode({address:e},function(e,t){t==google.maps.GeocoderStatus.OK&&map2.setCenter(e[0].geometry.location)})}